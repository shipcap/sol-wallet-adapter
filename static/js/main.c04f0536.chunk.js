(this["webpackJsonpsol-wallet-adapter-example"]=this["webpackJsonpsol-wallet-adapter-example"]||[]).push([[0],{103:function(e,n){},124:function(e,n){},125:function(e,n){},145:function(e,n,t){"use strict";t.r(n);t(76);var r=t(16),o=t(73),i=t.n(o),s=t(1),a=t.n(s),c=t(3),u=t(13),d=t(12),l=(t(82),t(8)),p=t(9),h=t(22),f=t(24),v=t(33),b=t.n(v),w=t(18),j=t(10),g=t.n(j),m=function(e,n,t,r){return new(t||(t=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(n){i(n)}}function a(e){try{c(r.throw(e))}catch(n){i(n)}}function c(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(s,a)}c((r=r.apply(e,n||[])).next())}))},_=function(e){Object(h.a)(t,e);var n=Object(f.a)(t);function t(e,r){var o,i;if(Object(l.a)(this,t),(o=n.call(this))._network=r,o._publicKey=null,o._popup=null,o._handlerAdded=!1,o._nextRequestId=1,o._autoApprove=!1,o._responsePromises=new Map,o.handleMessage=function(e){var n;if(o._injectedProvider&&e.source===window||e.origin===(null===(n=o._providerUrl)||void 0===n?void 0:n.origin)&&e.source===o._popup)if("connected"===e.data.method){var t=new w.b(e.data.params.publicKey);o._publicKey&&o._publicKey.equals(t)||(o._publicKey&&!o._publicKey.equals(t)&&o.handleDisconnect(),o._publicKey=t,o._autoApprove=!!e.data.params.autoApprove,o.emit("connect",o._publicKey))}else if("disconnected"===e.data.method)o.handleDisconnect();else if(e.data.result||e.data.error){var r=o._responsePromises.get(e.data.id);if(r){var i=Object(d.a)(r,2),s=i[0],a=i[1];e.data.result?s(e.data.result):a(new Error(e.data.error))}}},o._beforeUnload=function(){o.disconnect()},function(e){return"object"===typeof e&&null!==e}(i=e)&&"postMessage"in i&&"function"===typeof i.postMessage)o._injectedProvider=e;else{if(!function(e){return"string"===typeof e}(e))throw new Error("provider parameter must be an injected provider or a URL string.");o._providerUrl=new URL(e),o._providerUrl.hash=new URLSearchParams({origin:window.location.origin,network:o._network}).toString()}return o}return Object(p.a)(t,[{key:"handleConnect",value:function(){var e,n=this;return this._handlerAdded||(this._handlerAdded=!0,window.addEventListener("message",this.handleMessage),window.addEventListener("beforeunload",this._beforeUnload)),this._injectedProvider?new Promise((function(e){n.sendRequest("connect",{}),e()})):(window.name="parent",this._popup=window.open(null===(e=this._providerUrl)||void 0===e?void 0:e.toString(),"_blank","location,resizable,width=460,height=675"),new Promise((function(e){n.once("connect",e)})))}},{key:"handleDisconnect",value:function(){var e=this;this._handlerAdded&&(this._handlerAdded=!1,window.removeEventListener("message",this.handleMessage),window.removeEventListener("beforeunload",this._beforeUnload)),this._publicKey&&(this._publicKey=null,this.emit("disconnect")),this._responsePromises.forEach((function(n,t){var r=Object(d.a)(n,2)[1];e._responsePromises.delete(t),r(new Error("Wallet disconnected"))}))}},{key:"sendRequest",value:function(e,n){return m(this,void 0,void 0,a.a.mark((function t(){var r,o=this;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("connect"===e||this.connected){t.next=2;break}throw new Error("Wallet not connected");case 2:return r=this._nextRequestId,++this._nextRequestId,t.abrupt("return",new Promise((function(t,i){var s,a,c,u;o._responsePromises.set(r,[t,i]),o._injectedProvider?o._injectedProvider.postMessage({jsonrpc:"2.0",id:r,method:e,params:Object.assign({network:o._network},n)}):(null===(s=o._popup)||void 0===s||s.postMessage({jsonrpc:"2.0",id:r,method:e,params:n},null!==(c=null===(a=o._providerUrl)||void 0===a?void 0:a.origin)&&void 0!==c?c:""),o.autoApprove||null===(u=o._popup)||void 0===u||u.focus())})));case 5:case"end":return t.stop()}}),t,this)})))}},{key:"publicKey",get:function(){return this._publicKey}},{key:"connected",get:function(){return null!==this._publicKey}},{key:"autoApprove",get:function(){return this._autoApprove}},{key:"connect",value:function(){return m(this,void 0,void 0,a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._popup&&this._popup.close(),e.next=3,this.handleConnect();case 3:case"end":return e.stop()}}),e,this)})))}},{key:"disconnect",value:function(){return m(this,void 0,void 0,a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._injectedProvider){e.next=3;break}return e.next=3,this.sendRequest("disconnect",{});case 3:this._popup&&this._popup.close(),this.handleDisconnect();case 5:case"end":return e.stop()}}),e,this)})))}},{key:"sign",value:function(e,n){return m(this,void 0,void 0,a.a.mark((function t(){var r,o,i;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e instanceof Uint8Array){t.next=2;break}throw new Error("Data must be an instance of Uint8Array");case 2:return t.next=4,this.sendRequest("sign",{data:e,display:n});case 4:return r=t.sent,o=g.a.decode(r.signature),i=new w.b(r.publicKey),t.abrupt("return",{signature:o,publicKey:i});case 8:case"end":return t.stop()}}),t,this)})))}},{key:"signTransaction",value:function(e){return m(this,void 0,void 0,a.a.mark((function n(){var t,r,o;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.sendRequest("signTransaction",{message:g.a.encode(e.serializeMessage())});case 2:return t=n.sent,r=g.a.decode(t.signature),o=new w.b(t.publicKey),e.addSignature(o,r),n.abrupt("return",e);case 7:case"end":return n.stop()}}),n,this)})))}},{key:"signAllTransactions",value:function(e){return m(this,void 0,void 0,a.a.mark((function n(){var t,r,o;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.sendRequest("signAllTransactions",{messages:e.map((function(e){return g.a.encode(e.serializeMessage())}))});case 2:return t=n.sent,r=t.signatures.map((function(e){return g.a.decode(e)})),o=new w.b(t.publicKey),e=e.map((function(e,n){return e.addSignature(o,r[n]),e})),n.abrupt("return",e);case 7:case"end":return n.stop()}}),n,this)})))}}]),t}(b.a);var x=t(11);function y(e){return Array.prototype.map.call(e,(function(e){return("00"+e.toString(16)).slice(-2)})).join("")}var k=function(){var e,n=Object(r.useState)([]),t=Object(d.a)(n,2),o=t[0],i=t[1];function s(e){i((function(n){return[].concat(Object(u.a)(n),[e])}))}var l=Object(w.e)("devnet"),p=Object(r.useState)("https://www.sollet.io"),h=Object(d.a)(p,2),f=h[0],v=h[1],b=Object(r.useMemo)((function(){return new w.a(l)}),[l]),j=Object(r.useMemo)((function(){return new _(f,l)}),[f,l]),g=Object(r.useMemo)((function(){try{return new _(window.solana,l)}catch(e){return console.log("Could not create injected wallet",e),null}}),[l]),m=Object(r.useState)(void 0),k=Object(d.a)(m,2),O=k[0],P=k[1],K=Object(r.useState)(!1),A=Object(d.a)(K,2)[1];function E(){return(E=Object(c.a)(a.a.mark((function e(){var n,t,r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,(n=null===O||void 0===O?void 0:O.publicKey)&&O){e.next=4;break}throw new Error("wallet not connected");case 4:return t=(new w.d).add(w.c.transfer({fromPubkey:n,toPubkey:n,lamports:100})),s("Getting recent blockhash"),e.next=8,b.getRecentBlockhash();case 8:return t.recentBlockhash=e.sent.blockhash,s("Sending signature request to wallet"),t.feePayer=n,e.next=13,O.signTransaction(t);case 13:return r=e.sent,s("Got signature, submitting transaction"),e.next=17,b.sendRawTransaction(r.serialize());case 17:return s("Submitted transaction "+(o=e.sent)+", awaiting confirmation"),e.next=21,b.confirmTransaction(o,"singleGossip");case 21:s("Transaction "+o+" confirmed"),e.next=28;break;case 24:e.prev=24,e.t0=e.catch(0),console.warn(e.t0),s("Error: ".concat(e.t0.message));case 28:case"end":return e.stop()}}),e,null,[[0,24]])})))).apply(this,arguments)}function S(){return(S=Object(c.a)(a.a.mark((function e(){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,O){e.next=3;break}throw new Error("wallet not connected");case 3:return"Please sign this message for proof of address ownership.",s("Sending message signature request to wallet"),n=(new TextEncoder).encode("Please sign this message for proof of address ownership."),e.next=8,O.sign(n,"hex");case 8:s("Got signature: "+y(e.sent.signature)),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),console.warn(e.t0),s("Error: ".concat(e.t0.message));case 16:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}return Object(r.useEffect)((function(){if(O)return O.on("connect",(function(){var e,n;A(!0),s("Connected to wallet ".concat(null!==(e=null===(n=O.publicKey)||void 0===n?void 0:n.toBase58())&&void 0!==e?e:"--"))})),O.on("disconnect",(function(){A(!1),s("Disconnected from wallet")})),O.connect(),function(){O.disconnect()}}),[O]),Object(x.jsxs)("div",{className:"App",children:[Object(x.jsx)("h1",{children:"Wallet Adapter Demo"}),Object(x.jsxs)("div",{children:["Network: ",l]}),Object(x.jsxs)("div",{children:["Waller provider:"," ",Object(x.jsx)("input",{type:"text",value:f,onChange:function(e){return v(e.target.value.trim())}})]}),O&&O.connected?Object(x.jsxs)("div",{children:[Object(x.jsxs)("div",{children:["Wallet address: ",null===(e=O.publicKey)||void 0===e?void 0:e.toBase58(),"."]}),Object(x.jsx)("button",{onClick:function(){return E.apply(this,arguments)},children:"Send Transaction"}),Object(x.jsx)("button",{onClick:function(){return S.apply(this,arguments)},children:"Sign Message"}),Object(x.jsx)("button",{onClick:function(){return O.disconnect()},children:"Disconnect"})]}):Object(x.jsxs)("div",{children:[Object(x.jsx)("button",{onClick:function(){return P(j)},children:"Connect to Wallet"}),Object(x.jsx)("button",{onClick:function(){return P(g)},children:"Connect to Injected Wallet"})]}),Object(x.jsx)("hr",{}),Object(x.jsx)("div",{className:"logs",children:o.map((function(e,n){return Object(x.jsx)("div",{children:e},n)}))})]})};i.a.render(Object(x.jsx)(k,{}),document.getElementById("root"))},76:function(e,n,t){},82:function(e,n,t){},83:function(e,n){},87:function(e,n){}},[[145,1,2]]]);
//# sourceMappingURL=main.c04f0536.chunk.js.map